@* Standardized alert component using Bootstrap *@

@if (_isVisible)
{
    <div class="alert alert-@GetAlertClass() @(Dismissable ? "alert-dismissible" : "") fade show" role="alert">
        @if (!string.IsNullOrEmpty(Title))
        {
            <strong>@Title</strong>
            @if (!string.IsNullOrEmpty(Message))
            {
                <br />
            }
        }
        @if (!string.IsNullOrEmpty(Message))
        {
            @Message
        }
        @ChildContent
        @if (Dismissable)
        {
            <button type="button" class="btn-close" @onclick="Close" aria-label="Close"></button>
        }
    </div>
}

@code {
    private bool _isVisible = true;

    /// <summary>
    /// Alert type (primary, secondary, success, danger, warning, info)
    /// </summary>
    [Parameter] public string AlertType { get; set; } = "primary";

    /// <summary>
    /// Whether the alert can be dismissed
    /// </summary>
    [Parameter] public bool Dismissable { get; set; } = true;

    /// <summary>
    /// Alert title (optional)
    /// </summary>
    [Parameter] public string? Title { get; set; }

    /// <summary>
    /// Alert message (optional)
    /// </summary>
    [Parameter] public string? Message { get; set; }

    /// <summary>
    /// Custom content for the alert
    /// </summary>
    [Parameter] public RenderFragment? ChildContent { get; set; }

    private string GetAlertClass() => AlertType.ToLower() switch
    {
        "primary" => "primary",
        "secondary" => "secondary",
        "success" => "success",
        "danger" => "danger",
        "warning" => "warning",
        "info" => "info",
        "light" => "light",
        "dark" => "dark",
        _ => "primary"
    };

    private void Close()
    {
        _isVisible = false;
        StateHasChanged();
    }
}
